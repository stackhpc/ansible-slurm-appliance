[nfs:children]
openhpc

[mysql:children]
control

[prometheus:children]
control

[grafana:children]
control

[alertmanager:children]
control

[node_exporter:children]
cluster

[opensearch:children]
control

[slurm_stats:children]
control

[filebeat:children]
slurm_stats

[rebuild]
# Add 'control' group to enable slurm-controlled rebuild of compute nodes
# NB: Compute nodes need compute_init enabled

[update:children]

[fail2ban:children]
# Hosts to install fail2ban on to protect SSH
login

[block_devices:children]
# Environment-specific so not defined here

[basic_users:children]
# Add `openhpc` group to add Slurm users via creation of users on each node.
openhpc

[openondemand:children]
# Host to run Open Ondemand server on - subset of login
login

[openondemand_desktop:children]
# Subset of compute to run a interactive desktops on via Open Ondemand
compute

[openondemand_jupyter:children]
# Subset of compute to run a Jupyter Notebook servers on via Open Ondemand
compute

[etc_hosts:children]
# Hosts to manage /etc/hosts e.g. if no internal DNS. See ansible/roles/etc_hosts/README.md
cluster

[cuda]
# Hosts to install NVIDIA CUDA on - see ansible/roles/cuda/README.md

[eessi:children]
# Hosts on which EESSI stack should be configured
openhpc

[resolv_conf]
# Allows defining nameservers in /etc/resolv.conf - see ansible/roles/resolv_conf/README.md

[proxy]
# Hosts to configure http/s proxies - see ansible/roles/proxy/README.md

[manila]
# Hosts to configure for manila fileshares

[persist_hostkeys:children]
# Hosts to use common set of hostkeys which persist across reimaging.
login
openondemand

[squid]
# Hosts to run squid proxy

[tuned:children]
# Hosts to run TuneD configuration

[sssd]
# Hosts to configure sssd on

[sshd]
# Hosts where the OpenSSH server daemon should be configured

[compute_init]
# EXPERIMENTAL: Compute hosts which should rejoin the cluster after rebuild
# without running site.yml playbook.
# NB: Additional configuration is required and not all functionality is
# currently supported - ee ansible/roles/compute_init/README.md

[k3s_server:children]
# Hosts to run k3s server (should only be single node i.e control node)
#control

[k3s_agent:children]
# Hosts to run k3s agent
#compute
#login

[k9s:children]
# Hosts to install k9s on
#control

[lustre]
# Hosts to run lustre client

[extra_packages:children]
# Hosts to install specified additional packages on
builder

[cacerts]
# Hosts to configure CA certificates and trusts on

[chrony]
# Hosts where crony configuration is applied. See docs/chrony.md for more details.

[gateway:children]
# Hosts to install compute_init playbook on during image build to configure ip gateway on boot
cluster
