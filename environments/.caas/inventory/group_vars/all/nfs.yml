---
nfs_server: "{{ nfs_server_default }}"

caas_nfs_home:
  - comment: Export /exports/home from Slurm control node as /home
    nfs_enable:
      server: "{{ inventory_hostname in groups['control'] }}"
      clients: "{{ inventory_hostname in groups['cluster'] }}"
    nfs_export: "/exports/home" # assumes default site TF is being used
    nfs_client_mnt_point: "/home"

caas_ood_zenith_state_dir:
  - comment: Export /var/lib/state from Slurm control node
    nfs_enable:
      server: "{{ inventory_hostname in groups['control'] }}"
      clients: "{{ inventory_hostname in groups['openondemand'] }}"
    nfs_export: "/var/lib/state"
    nfs_client_mnt_point: "/var/lib/state"

nfs_configurations: "{{ caas_ood_zenith_state_dir + ( caas_nfs_home if not cluster_home_manila_share | bool else [] ) }}"
