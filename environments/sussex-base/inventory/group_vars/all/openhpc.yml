# As per the docs:
# - A partition entry may contain groups. If it doesn't the partition itself is the group.
# - Nodes can only be in one group (else slurmctld startup fails with "fatal: Duplicated NodeName"
#   due to templating approach. But can use $group.partition_params.Nodes to add nodes
#   in to other groups. However this overrides the autogenerated Nodes= line, so
#   now all nodes have to be added in.
openhpc_slurm_partitions:
  - name: general # all nodes except grid
    groups:
      - name: general
      - name: general_a40 # needs to not match an inventory group
    partition_params:
      Nodes: "{{ openhpc_cluster_name }}-general-[0-1],{{ openhpc_cluster_name }}-a40-[300-301]"
    default: YES
  - name: grid
    default: NO
  - name: gpu # all GPU nodes
    groups:
      - name: a40 # TODO: gres
    default: NO

openhpc_config_extra: {} # parameters for slurm.conf
