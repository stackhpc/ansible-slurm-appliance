- name: Template host-independent Terraform configuration files
  template:
    src: "{{ item }}"
    dest: "{{ tf_project_path }}/{{ item | splitext | first }}"
  loop: "{{ tf_cluster_templates }}"
  run_once: true
  delegate_to: localhost

- name: Template host-dependent Terraform configuration files
  template:
    src: "{{ item }}"
    dest: "{{ tf_project_path }}/{{inventory_hostname }}_{{ item | splitext | first }}"
  loop: "{{ tf_host_templates }}"
  delegate_to: localhost
